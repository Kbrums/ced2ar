function clearFilter(){$("#clearFilter").unbind(),$("#clearFilter").click(function(){return $("#ff :checkbox").prop("checked",!1),$("#ff :checkbox").change(),!1})}function toggleFilter(){$(".filterVersion").hide(),$(".fts").show(),$(".filterToggle .fti").html("<i class='fa fa-plus-square'></i>"),$(".filterToggle .fti").attr("title","Show details"),$(".filterToggle").each(function(){$(this).next().hasClass("fts")&&($(".fti",this).attr("title","Hide details"),$(".fti",this).html("<i class='fa fa-minus-square'></i>"))}),$(".fti",".filterToggle").on("click",function(){var e=$(this).next().attr("class"),t=this;$(".filterVersion."+e).slideToggle(0,function(){$(this).is(":visible")?($(this).addClass("fts"),$(t).attr("title","Hide details"),$(t).html("<i class='fa fa-minus-square'></i>"),$(".filterShow."+e).val(e)):($(this).removeClass("fts"),$(t).attr("title","Show details"),$(t).html("<i class='fa fa-plus-square'></i>"),$(".filterShow."+e).removeAttr("value"))}),$("input[name=updateT]").val("1"),$.ajax({cache:!1,url:baseURI+"/filterCodebook",data:$("#ff").serialize(),async:!1})})}function changeResultSize(){$("#limitResults").change(function(){$("#results").length&&$("#viewControls").submit()}),$(".browseLetter").click(function(){return l=$(this).text(),$("#viewControls input[name=a]").val(l),$("#viewControls").submit(),!1})}function changeFilter(){$("#ff :checkbox").change(function(){"cb"==$(this).attr("name")?$("input[name='updateV']").val("1"):"ctb"==$(this).attr("name")&&$("input[name='updateB']").val("1"),loadFilter(),$("#results").length?$("#viewControls").submit():(loadVerbose(),changeFilter())})}function loadVerbose(){$.ajax({cache:!1,url:baseURI+"/filterVerbose",async:!1,success:function(e){$("#filterCodebookVerbose").empty(),$("#filterCodebookVerbose").html(e),clearFilter()}})}function loadFilter(){$.ajax({cache:!1,url:baseURI+"/filterCodebook",data:$("#ff").serializeArray(),async:!1,success:function(e){f.html(e),toggleFilter(),changeFilter(),$(".helpIcon").popover({trigger:"hover"}),$(".ttf").tooltip({placement:"right"})}})}function changeCompare(){$("input[name='cc']").each(function(){$(this).is(":checked")&&$(this).attr("title","Remove from compare")}),$("input[name='cc']").change(function(){$(this).is(":checked")?($(this).attr("title","Remove from compare"),loadCompare()):($(this).attr("title","Add to compare"),removeCompare2(this.value))})}function loadCompare(){$.ajax({cache:!1,url:baseURI+"/filterCompare",data:$("#rf").serializeArray(),async:!1,success:function(e){c.html(e)}})}function resetCompare(){$("#rf")[0].reset(),$.ajax({cache:!1,url:baseURI+"/filterCompareReset",async:!1,success:function(e){c.html(e)}})}function removeCompare(e){var t=$(e).next().val(),i=$("[value='"+t+"']");return i.prop("checked",!1),$.ajax({cache:!1,url:baseURI+"/filterCompareRemove",data:"rm="+t,async:!1,success:function(e){c.html(e)}}),!1}function removeCompare2(e){var t=$("input[value='"+e+"'][name='cv']");return t.prop("checked",!1),$.ajax({cache:!1,url:baseURI+"/filterCompareRemove",data:"rm="+e,async:!1,success:function(e){c.html(e)}}),!1}function compareCheck(){$("input[name='cv']").each(function(){var e=this.value,t=$("[value='"+e+"'][name='cc']");t.prop("checked",!0)})}function filterHide(){$("#filterHide").attr("title","Hide sidebar"),"true"==getCookie("smallDisplay")&&($("#sidebar").attr("class","col-xs-0"),$("#sidebar").css("display","none"),$("#filterHide").attr("title","Show sidebar"),$("#filterHide").css("background-image","url('"+baseURI+"/images/arrow-r.png')"),$("#filterHide").addClass("filterHighlight"),$("#main").css("left","12px")),$("#filterHide").on("click",function(){$("#sidebar").toggle(0,function(){$("#sidebar").is(":visible")?(setCookie("smallDisplay","false"),$("#sidebar").attr("class",sideFilterSize),$("#sidebar").css("display","inline-block"),$("#filterHide").attr("title","Hide sidebar"),$("#filterHide").css("background-image","url('"+baseURI+"/images/arrow-l.png')"),$("#filterHide").removeClass("filterHighlight"),$("#main").css("left","")):(setCookie("smallDisplay","true"),$("#sidebar").css("display","none"),$("#sidebarOuter").attr("class","col-xs-0"),$("#filterHide").attr("title","Show sidebar"),$("#filterHide").css("background-image","url('"+baseURI+"/images/arrow-r.png')"),$("#filterHide").addClass("filterHighlight"),$("#main").css("left","12px"))})})}function setCookie(e,t,i){var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3);var r="expires="+a.toGMTString();document.cookie=e+"="+t+"; "+r}function getCookie(e){for(var t=e+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){var r=i[a].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}var sideFilterSize="col-xs-4 col-sm-3 col-md-2";$(document).ready(function(){baseURI=$("#meta_uri").html(),$("#sidebar").attr("class",sideFilterSize),$("#main").attr("class","col-xs-6 col-sm-8"),f=$("#filterCodebook"),c=$("#filterCompare"),loadFilter(),loadCompare(),compareCheck(),changeCompare(),filterHide(),changeResultSize(),clearFilter()});