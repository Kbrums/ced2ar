function editFieldListener(){$(".editIcon2").off("click"),$(".editIcon2").on("click",function(){return loadAjax(this.href,!0),$(this).off("click"),$("#info .close").click(),!1})}function schemaDescListener(){$(".schemaDocLink").off("click"),$(".schemaDocLink").click(function(){return loadAjax(this.href,!1),$(this).off("click"),$("#info .close").click(),!1})}function loadAjax(e,i){var n=Math.max(document.documentElement.clientHeight,window.innerHeight||0);$.ajax({cache:!1,url:e,success:function(t){l.html(t),i&&($("#editForm").attr("action",e),_activeField=e.replace("edit?","edit-cancel?")),l.addClass("loadShow"),$("body").css("overflow-y","hidden"),$("#wrapper").css("padding-right","30px");var o=$("#wrapper").height(),c=$(window).height();c>o&&(o=c),l.css("min-height",o),$("#loadCoverInner").css("max-height",.9*n),submitListener(i)}})}function submitListener(e){notPressed=!0,$(document).keydown(function(i){27==i.keyCode&&notPressed&&(notPressed=!1,hideAjax(e)),13==i.keyCode&&hideAjax(e)}),e?$("#editDiscard").click(function(){return hideAjax(e),!1}):$(".closeWindow").click(function(){return hideAjax(e),!1}),l.click(function(){hideAjax(e)}),$("#loadCoverInner").click(function(e){e.stopPropagation()}),$("#editSave").click(function(){var e=$("#editForm").attr("action");showSpinner(),$.ajax({type:"POST",url:e,data:$("#editForm").serialize(),success:function(e){return location.reload(),!1},error:function(e,i,n){var t=e.getResponseHeader("conflictingValue");return""!==t?conflictDiff(t):alert("Malformed or invalid content"),hideSpinner(),$("#editSave").unbind(),submitListener(!1),!1}})})}function conflictDiff(e){alert("Warning! Your changes conflict with recent edits. Please review these edits before overwriting them."),$(".conflictItem").removeClass("hidden");var i="";$("#mceu_7").length?(i=tinyMCE.activeEditor.getContent({format:"raw"}),tinyMCE.activeEditor.isNotDirty=!1):i=$("#editForm input[name='newValue']").val();var n=runDiff(i,e);$("#conflictDiff").html(n),console.log(tinyMCE.activeEditor),tinyMCE.activeEditor.save_enablewhendirty=!1}function hideAjax(e){l.html(""),l.removeClass("loadShow"),l.css("min-height",0),$("#wrapper").css("padding-right","15px"),$("body").css("overflow-y","scroll"),e?(editFieldListener(),cancelEdit()):schemaDescListener()}function cancelEdit(){$.ajax({type:"GET",url:_activeField,data:$("#editForm").serialize(),success:function(e){},error:function(e){}}),_activeField=null}function showSpinner(){var e=$("#loadCoverInner").height(),i=$("#loadCoverInner").width();$("#loadCoverInner").prepend("<div id='loadingContent2'><div id='loadingContentInner'><i class='fa fa-circle-o-notch fa-spin'></i></div></div>"),$("#loadCoverInner").addClass("noSelect"),$("#loadingContent2").css("height",e),$("#loadingContent2").css("width",i),$("#editForm").css("opacity",.3)}function hideSpinner(){$("#loadingContent2").remove(),$("#loadCoverInner").removeClass("noSelect"),$("#editForm").css("opacity",1)}function appendBaseURI(){$(".baseURIa").each(function(){$(this).attr("href",baseURI+$(this).attr("href"))})}var _activeField=null;$(document).ready(function(){l=$("#load"),baseURI=$("#meta_uri").html(),appendBaseURI(),editFieldListener(),schemaDescListener()});