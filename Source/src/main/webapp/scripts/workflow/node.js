function edgeDeleteListen(e,t,o,n){$(e).unbind(),$(e).click(function(){$.ajax({cache:!1,type:"DELETE",url:baseURI+"/edit/workflow/e/"+o,complete:function(){$(n).remove()}})}),$(t).click(function(){return!0})}function getScore(){$.ajax({url:baseURI+"/edit/workflow/n/"+nodeID+"/score",dataType:"json",success:function(e,t,o){loadScore(e,o.getResponseHeader("message"))}})}function loadScore(e,t){$("#totalScore").html(e+"% complete "+t)}$(document).ready(function(){l=$("#load"),baseURI=$("#meta_uri").html(),nodeID=$("#nodeID").val(),getScore(),codebooks=[],$("#nodeHandle").length&&$.ajax({url:baseURI+"/rest/codebooks",headers:{"id-type":"json2",accept:"application/json"}}).done(function(e){codebooks=e,$("#nodeHandle").editable({type:"select",pk:"handle",url:nodeID,title:"Choose Metadata",source:codebooks,success:function(e,t){h=t.split("."),$("#docLink").attr("href",baseURI+"/codebooks/"+h[0]+"/v/"+h[1])}})}),$("#nodeURI").editable({type:"url",pk:"uri",url:nodeID,title:"Edit URI",success:function(e,t){getScore()}}),$("#nodeNotes").length&&$("#nodeNotes").editable({type:"textarea",pk:"notes",url:nodeID,title:"Edit Notes",success:function(e,t){getScore()}}),$("#nodeDisplayName").length&&$("#nodeDisplayName").editable({type:"text",pk:"displayName",url:nodeID,title:"Edit Display Name"}),$("#nodeAuthor").length&&$("#nodeAuthor").editable({type:"text",pk:"author",url:nodeID,title:"Edit Author",success:function(e,t){getScore()}}),$("#nodeDOI").length&&$("#nodeDOI").editable({type:"text",pk:"doi",url:nodeID,title:"Edit DOI",success:function(e,t){getScore()}}),$(".edgeDelete").editable({type:"text",pk:"delete",title:"Delete this edge?",success:function(e,t){getScore()}}),$(".edgeDelete").click(function(){$(".editable-submit").html("Yes"),$(".editable-cancel").html("No");var e=$(this).next(),t=$(this).val(),o=$(e).find(".editable-submit"),n=$(e).find(".editable-cancel"),l=$(this).parent();edgeDeleteListen(o,n,t,l)}),$("#nodeDelete").click(function(){$(".editable-submit").html("Yes"),$(".editable-cancel").html("No");var e=$(this).next(),t=$(this).next().next().val(),o=$(e).find(".editable-submit"),n=$(e).find(".editable-cancel");t=$(this).next().next().val(),nodeDeleteListen(o,n)})});